{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Player breathing circle: enforce 5% max-diameter margin at full inhale",
  "requirements": [
    {
      "id": "REQ-9",
      "summary": "Ensure the breathing circle’s maximum expanded diameter is capped to ~90.909% of its square container so it never touches the outer boundary, maintaining a 5% (of max diameter) visible margin during inhale.",
      "acceptanceCriteria": [
        "During the inhale (expand) animation, the circle does not touch or overlap the outer boundary of its container.",
        "The gap between the circle edge (at maximum expansion) and the outer boundary equals 5% of the circle’s maximum diameter (equivalently: circle max diameter is ~90.909% of the container’s square size).",
        "The change applies consistently across common mobile viewport sizes (no edge contact at max expansion)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Update breathing animation keyframes to cap the maximum scale at 1/1.1 (~0.90909) for the expanded state, and add distinct hold animations/classes so holdTop maintains the capped max scale while holdBottom maintains the contracted scale—preventing any snap to full size that could touch the outer boundary."
        },
        {
          "path": "frontend/src/components/BreathingCircle.tsx",
          "operation": "modify",
          "description": "Adjust animation class selection so inhale/exhale use the updated capped-scale animations, and holds use phase-appropriate hold classes (separate for holdTop vs holdBottom) to preserve the correct circle size without touching the container border at any point."
        }
      ]
    }
  ]
}